"use strict";
var dataAtual,
  redirectH,
  verificarRedirect,
  activateBell,
  blinkTitle,
  bellButton,
  navBarFlex,
  bellBox,
  capturaTargetClick,
  originalPageTitle,
  vsl = {
    siglaCopy: "cta01",
    idVideoVsl: "A-NyLc322ks",
    checkoutInvertido: !1,
    checkout1:
      "https://pepper.com.br/checkout/index.html?p=43089&o=43898&p=1&s=1&gi=1",
    checkout2: "",
    tempoCTA: { minutos:2, segundos:58 },
    displayBell: !0,
    delayBell: 30,
    copyReadVersion: "https://lp.jotatreinamentos.com.br/marmita-fit/texto/",
    sectionContato: !0,
    sectionGarantia: !0,
    sectionJota: !0,
    displayCtaFooter: !0,
    footer: { garantia: !0, linkRegulamento: "" },
    redirect: {
      habilitar: !1,
      dataHabilitar: "Aug 08, 2023 15:27:00",
      urlRedirect: "https://app.jotatreinamentos.com.br",
      desabilitar: !1,
      dataDesabilitar: "Aug 08, 2023 15:27:10"
    }
  },
  siglaCopy = vsl.siglaCopy,
  idVideoVsl = vsl.idVideoVsl,
  checkoutInvertido = vsl.checkoutInvertido,
  checkout1 = vsl.checkout1,
  checkout2 = vsl.checkout2,
  tempoCTA = vsl.tempoCTA,
  displayBell = vsl.displayBell,
  delayBell = vsl.delayBell,
  copyReadVersion = vsl.copyReadVersion,
  sectionContato = vsl.sectionContato,
  sectionGarantia = vsl.sectionGarantia,
  sectionJota = vsl.sectionJota,
  displayCtaFooter = vsl.displayCtaFooter,
  footer = vsl.footer,
  redirect = vsl.redirect;
redirect.habilitar &&
  ((redirectH = new Date(redirect.dataHabilitar).getTime()),
  (verificarRedirect = setInterval(function () {
    (dataAtual = new Date().getTime()),
      redirectH < dataAtual &&
        ((redirect.desabilitar &&
          new Date(redirect.dataDesabilitar).getTime() < dataAtual) ||
          ((redirect.habilitar = !1),
          (window.location.href =
            redirect.urlRedirect + window.location.search)),
        clearInterval(verificarRedirect));
  }, 1e3))),
  displayBell &&
    ((activateBell = function () {
      var e = document.querySelector(".bell_emptyMsg"),
        t = document.querySelector(".bell_fullMsg");
      window.setTimeout(function () {
        bellButton.classList.add("bell_ring"),
          (e.style.display = "none"),
          (t.style.display = "block");
        var o = document.querySelector(".bell_cta");
        "" != checkout1 &&
          "" != checkout2 &&
          (o.removeAttribute("href"), scrollTo(".bell_cta", ".video", 35)),
          blinkTitle();
      }, 1e3 * delayBell);
    }),
    (blinkTitle = function () {
      var e = setInterval(function () {
        (document.title = "(1) Nova Mensagem"),
          setTimeout(function () {
            document.title = originalPageTitle;
          }, 3e3);
      }, 6e3);
      bellButton.addEventListener("click", function () {
        bellButton.classList.contains("bell_ring") &&
          (bellButton.classList.remove("bell_ring"),
          (document.title = originalPageTitle),
          clearInterval(e));
      });
    }),
    (bellButton = document.querySelector(".bell_button")),
    (navBarFlex = document.querySelector(".navBar_flex")),
    (bellBox = document.querySelector(".bell_box")),
    (capturaTargetClick = document),
    (bellButton.style.display = "block"),
    (navBarFlex.style.justifyContent = "space-between"),
    capturaTargetClick.addEventListener("click", function (e) {
      e.target.classList.contains("bell_button")
        ? bellBox.classList.toggle("bell_boxVisible")
        : bellBox.classList.remove("bell_boxVisible");
    }),
    bellBox.addEventListener("click", function (e) {
      e.stopPropagation();
    }),
    (originalPageTitle = document.title));
var videoYT,
  jaAcessou =
    !!getCookie("jaAcessou-" + siglaCopy) ||
    setCookie("jaAcessou-" + siglaCopy, "true", "365"),
  tag = document.createElement("script"),
  firstScriptTag =
    ((tag.src = "https://www.youtube.com/player_api"),
    document.getElementsByTagName("script")[0]);
function onYouTubePlayerAPIReady() {
  videoYT = new YT.Player("divVideoYT", {
    videoId: idVideoVsl,
    playerVars: {
      controls: 0,
      autoplay: 1,
      enablejsapi: 1,
      rel: 0,
      playsinline: 1,
      showinfo: 0,
      origin: window.location.origin,
      modestbranding: 1
    },
    events: {
      onStateChange: verificarEstadoDoPlayer,
      onReady: executarFuncoesVSL
    }
  });
}
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var tempoAtualYT,
  pause = !1;
function verificarEstadoDoPlayer() {
  return (pause = "1" != videoYT.getPlayerState());
}
var ctaFake = document.querySelector(".video_cta-fake"),
  wrapperCTA = document.querySelector(".video_wrapperCta"),
  tempoCtaConvertido = 60 * tempoCTA.minutos + tempoCTA.segundos;
function executarFuncoesVSL() {
  var e, t;
  jaAcessou
    ? (e = setInterval(function () {
        "1" == videoYT.getPlayerState() && (ativarPagina(), clearInterval(e));
      }, 1e3))
    : (t = setInterval(function () {
        (tempoAtualYT = videoYT.getCurrentTime()),
          tempoCtaConvertido - 1 <= tempoAtualYT
            ? (ativarPagina(),
              (ctaFake.style.display = "none"),
              clearInterval(t))
            : ("1" == videoYT.getPlayerState() &&
                (ctaFake.style.display = "block"),
              (wrapperCTA.style.display = "none"));
      }, 1e3));
}
function ativarPagina() {
  ativarLinksCK(),
    displayBell && activateBell(),
    activateSections(),
    activateObsFooter(),
    displayCtaFooter && activateCtaFooter(),
    ativaVideoFooter(),
    (wrapperCTA.style.display = "block");
}
function activateCtaFooter() {
  var e = window,
    t = document.querySelector("#activateCtaFooter"),
    o = document.querySelector(".footer_ctaButtonWrapper");
  function i() {
    t.getBoundingClientRect().bottom <= 0.8 * window.innerHeight
      ? (o.style.bottom = "0")
      : (o.style.bottom = "-100px");
    var e = document.querySelector(".footer_ctaButton");
    "" != checkout1 &&
      "" != checkout2 &&
      (e.removeAttribute("href"), scrollTo(".footer_ctaButton", ".video", 35));
  }
  e.addEventListener("load", i),
    e.addEventListener("scroll", i),
    document
      .querySelector(".footer_copyright")
      .classList.add("footer_copyright-CTA");
}
function activateObsFooter() {
  var e = document.querySelector("#obsGarantia");
  e = footer.garantia ? (e.style.display = "block") : "";
  "" !== footer.linkRegulamento &&
    ((document.querySelector("#obsRegulamento").style.display = "block"),
    document
      .querySelector("a[data-tipoLink=linkRegulamento]")
      .setAttribute("href", footer.linkRegulamento + window.location.search));
}
var dt = new Date(),
  anoFooter = document.querySelector(".footer_copyright span");
function detectVideo() {
  0 < videoWrapperYT.getBoundingClientRect().bottom
    ? ((videoGhost.style.display = "none"),
      videoIframe.classList.remove("video_iframe-footer"),
      videoIframe.classList.remove("fadeInRight"))
    : ((videoGhost.style.display = "block"),
      videoIframe.classList.add("video_iframe-footer"),
      videoIframe.classList.add("fadeInRight"));
}
function ativaVideoFooter() {
  var e = document.querySelector(".video_wrapperYT"),
    t = document.querySelector(".video_iframe"),
    o =
      (e.insertAdjacentHTML(
        "beforebegin",
        '<div class="video_ghost" style="padding-bottom: 56.25%; display:none;"></div>'
      ),
      document.querySelector(".video_ghost")),
    i = window;
  function a() {
    0 < e.getBoundingClientRect().bottom
      ? ((o.style.display = "none"),
        t.classList.remove("video_iframe-footer"),
        t.classList.remove("fadeInRight"))
      : ((o.style.display = "block"),
        t.classList.add("video_iframe-footer"),
        t.classList.add("fadeInRight"));
  }
  i.addEventListener("scroll", a), i.addEventListener("load", a);
}
function scrollTo(e, t, o) {
  document.querySelector(e).addEventListener("click", function () {
    window.scroll({
      top:
        document.querySelector(t).getBoundingClientRect().top +
        window.scrollY -
        o,
      left: 0,
      behavior: "smooth"
    });
  });
}
function getCookie(e) {
  for (
    var t = e, o = decodeURIComponent(document.cookie).split(";"), i = 0;
    i < o.length;
    i++
  ) {
    for (var a = o[i]; " " == a.charAt(0); ) a = a.substring(1);
    if (0 == a.indexOf(t)) return a.substring(t.length, a.length);
  }
}
function setCookie(e, t, o) {
  var i = new Date();
  i.setTime(i.getTime() + 1e3 * o * 60 * 60 * 24),
    (o = "expires=" + i.toUTCString());
  return (document.cookie = e + "=" + t + ";" + o + ";path=/"), "";
}
(anoFooter.innerHTML = dt.getFullYear()),
  scrollTo(".footer_scrollTop-button", "body", 0);
var viewPort = window;
function animar() {
  Anima(".contato", "fadeIn", 0),
    Anima(".garantia_col1", "fadeInLeft", 0),
    Anima(".garantia_col2", "fadeInRight", 0),
    Anima(".Jota_cardNumbers:nth-of-type(1)", "fadeInUp", 0),
    Anima(".Jota_cardNumbers:nth-of-type(2)", "fadeInUp", 100),
    Anima(".Jota_cardNumbers:nth-of-type(3)", "fadeInUp", 200);
}
function Anima(e, t, o) {
  document.querySelectorAll(e).forEach(function (e) {
    e.getBoundingClientRect().bottom <= 0.8 * window.innerHeight &&
      setTimeout(function () {
        e.classList.add(t);
      }, o);
  });
}
viewPort.addEventListener("load", animar),
  viewPort.addEventListener("scroll", animar);
var verificaScrolagem = document.querySelector("body"),
  logoBar = document.querySelector(".navBar"),
  verificaLogoBar = document;
function fixedHeader() {
  verificaScrolagem.getBoundingClientRect().top < -5
    ? logoBar.classList.add("navBar_fixed")
    : logoBar.classList.remove("navBar_fixed");
}
verificaLogoBar.addEventListener("scroll", fixedHeader);
var linkTextVersion,
  desinverterCK,
  marks = document.querySelectorAll("mark"),
  viewportHighlight = window;
function findMark() {
  marks.forEach(function (e) {
    e.getBoundingClientRect().bottom <= 0.7 * window.innerHeight &&
      !e.classList.contains("marked") &&
      e.setAttribute("class", "marked");
  });
}
viewportHighlight.addEventListener("load", findMark),
  viewportHighlight.addEventListener("scroll", findMark),
  "" !== copyReadVersion &&
    (((linkTextVersion = document.querySelector(
      "a[data-tipoLink=linkTextVersion]"
    )).style.display = "block"),
    linkTextVersion.setAttribute(
      "href",
      copyReadVersion + window.location.search
    )),
  checkoutInvertido &&
    ((checkout1 = (desinverterCK = function (e) {
      return e.split("").reverse().join("");
    })(checkout1)),
    (checkout2 = desinverterCK(checkout2)));
var pegarParametrosURL = window.location.search,
  linksCheckout = document.querySelectorAll("a[data-tipoLink]");
function ajustarCK(e) {
  return -1 != e.indexOf("?")
    ? "" == pegarParametrosURL
      ? e
      : e + "&" + pegarParametrosURL.substring(1)
    : e + pegarParametrosURL;
}
function ativarLinksCK() {
  linksCheckout.forEach(function (e) {
    "linkCheckout1" == e.getAttribute("data-tipoLink") &&
      "" !== checkout1 &&
      (e.setAttribute("href", ajustarCK(checkout1)),
      (e.style.display = "inline-block")),
      "linkCheckout2" == e.getAttribute("data-tipoLink") &&
        "" !== checkout2 &&
        (e.setAttribute("href", ajustarCK(checkout2)),
        (e.style.display = "inline-block"));
  });
}
function activateSections() {
  sectionContato &&
    (document.querySelector(".contato").style.display = "block"),
    sectionGarantia &&
      (document.querySelector(".garantia").style.display = "block"),
    sectionJota &&
      (document.querySelector(".Jota").style.display = "block");
}
